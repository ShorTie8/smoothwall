# SmoothWall Build system.
#
# (c) SmoothWall Ltd 2005
#
# This code is distributed under the terms of the GPL v2.

ifdef GLOBALDEBUG
export GLOBALDEBUG = ON
endif
ifeq ($(BUILD_PHASE), Programs)
SOURCES_DIR = $(DISTRIB_PATH)/sources

TARGET_DIR = $(DISTRIB_PATH)/target

DOWNLOADS_DIR = $(DISTRIB_PATH)/downloads

DL_CMD = $(DISTRIB_PATH)/toolcrib/dlverify $(DOWNLOADS_DIR)

else
SOURCES_DIR = $(ROOT)/build/sources

TARGET_DIR = $(ROOT)/build/target

DOWNLOADS_DIR = $(ROOT)/build/downloads

DL_CMD = $(ROOT)/build/toolcrib/dlverify $(DOWNLOADS_DIR)
endif
EXTENSION = .tar.gz

TARBALL = $(PACKAGE)-$(VERSION)

DIR = $(PACKAGE)-$(VERSION)

COMPILE_DIR = $(DIR)

CONFIG_OPTS = \
	--disable-nls --disable-silent-rules \
	--libdir=$(PKG_DIR)/lib \
	--host=$(FINAL_TGT) --build=$(FINAL_TGT)

export IPT_LIBEXEC := /usr/libexec/xtables

ifndef DEFAULT
default: clean all
endif

ifndef PRINTVERSION
print-version:
	@printf "%s %s" "$(PACKAGE)" "$(VERSION)"
	@if [ "$(BASE_URL)" != "" ]; then echo " <a target=_blank href='$(BASE_URL)' target='_blank'>download URL</a>"; else echo; fi
endif

show_version:
	@echo $(VERSION)
